
#ifndef _ATH79_PCI_AB9531_H
#define _ATH79_PCI_AB9531_H

/* PCIE_PLL_CONFIG register (PCIE RC phase lock loop configuration) */
#define BITS(_s, _n)	(((1UL << (_n)) - 1) << _s)

#define QCA_PLL_PCIE_PLL_CFG_REFDIV_SHIFT   10
#define QCA_PLL_PCIE_PLL_CFG_REFDIV_MASK    BITS(QCA_PLL_PCIE_PLL_CFG_REFDIV_SHIFT, 5)
#define QCA_PLL_PCIE_PLL_CFG_BYPASS_SHIFT   16
#define QCA_PLL_PCIE_PLL_CFG_BYPASS_MASK    BIT(QCA_PLL_PCIE_PLL_CFG_BYPASS_SHIFT)
#define QCA_PLL_PCIE_PLL_CFG_PLLPWD_SHIFT   30
#define QCA_PLL_PCIE_PLL_CFG_PLLPWD_MASK    BIT(QCA_PLL_PCIE_PLL_CFG_PLLPWD_SHIFT)
#define QCA_PLL_PCIE_PLL_CFG_UPDATING_SHIFT 31
#define QCA_PLL_PCIE_PLL_CFG_UPDATING_MASK  BIT(QCA_PLL_PCIE_PLL_CFG_UPDATING_SHIFT)



/* PCIE_PLL_DITHER_DIV_MAX (PCIE PLL dither parameter) */
#define QCA_PLL_PCIE_PLL_DITHER_MAX_NFRAC_MAX_SHIFT 1
#define QCA_PLL_PCIE_PLL_DITHER_MAX_NFRAC_MAX_MASK  BITS(QCA_PLL_PCIE_PLL_DITHER_MAX_NFRAC_MAX_SHIFT, 14)
#define QCA_PLL_PCIE_PLL_DITHER_MAX_NINT_MAX_SHIFT  15
#define QCA_PLL_PCIE_PLL_DITHER_MAX_NINT_MAX_MASK   BITS(QCA_PLL_PCIE_PLL_DITHER_MAX_NINT_MAX_SHIFT, 6)
#define QCA_PLL_PCIE_PLL_DITHER_MAX_USE_MAX_SHIFT   30
#define QCA_PLL_PCIE_PLL_DITHER_MAX_USE_MAX_MASK    BIT(QCA_PLL_PCIE_PLL_DITHER_MAX_USE_MAX_SHIFT)
#define QCA_PLL_PCIE_PLL_DITHER_MAX_DITHER_EN_SHIFT 31
#define QCA_PLL_PCIE_PLL_DITHER_MAX_DITHER_EN_MASK  BIT(QCA_PLL_PCIE_PLL_DITHER_MAX_DITHER_EN_SHIFT)

/* PCIE_PLL_DITHER_DIV_MIN (PCIE PLL dither parameter) */
#define QCA_PLL_PCIE_PLL_DITHER_MIN_NFRAC_MIN_SHIFT 1
#define QCA_PLL_PCIE_PLL_DITHER_MIN_NFRAC_MIN_MASK  BITS(QCA_PLL_PCIE_PLL_DITHER_MIN_NFRAC_MIN_SHIFT, 14)
#define QCA_PLL_PCIE_PLL_DITHER_MIN_NINT_MIN_SHIFT  15
#define QCA_PLL_PCIE_PLL_DITHER_MIN_NINT_MIN_MASK   BITS(QCA_PLL_PCIE_PLL_DITHER_MIN_NINT_MIN_SHIFT, 6)


/* PCIE_APP register (PCIE application control) */
#define QCA_PCIE_RCX_CTRL_APP_LTSSM_EN_SHIFT	    0
#define QCA_PCIE_RCX_CTRL_APP_LTSSM_EN_MASK	BIT(QCA_PCIE_RCX_CTRL_APP_LTSSM_EN_SHIFT)

/* PCIE_RESET register (PCIE reset) */
#define QCA_PCIE_RCX_CTRL_RST_LINK_UP_SHIFT	0
#define QCA_PCIE_RCX_CTRL_RST_LINK_UP_MASK	BIT(QCA_PCIE_RCX_CTRL_RST_LINK_UP_SHIFT)
#define QCA_PCIE_RCX_CTRL_RST_LINK_REQ_RST_SHIFT    1
#define QCA_PCIE_RCX_CTRL_RST_LINK_REQ_RST_MASK	    BIT(QCA_PCIE_RCX_CTRL_RST_LINK_REQ_RST_SHIFT)
#define QCA_PCIE_RCX_CTRL_RST_EP_RST_L_SHIFT	    2
#define QCA_PCIE_RCX_CTRL_RST_EP_RST_L_MASK	BIT(QCA_PCIE_RCX_CTRL_RST_EP_RST_L_SHIFT)


#define CONFIG_QCA_PCIE_PLL_NFRAC_MAX_VAL   0x3FFF
#define CONFIG_QCA_PCIE_PLL_NFRAC_MIN_VAL   0x3F84

#define QCA_PCIE_RC0_CTRL_APP_REG	(ath79_pcie_base + 0x00)
#define QCA_PCIE_RC0_CTRL_RST_REG	(ath79_pcie_base + 0x18)

void ab_pcie_init(void);

#endif

