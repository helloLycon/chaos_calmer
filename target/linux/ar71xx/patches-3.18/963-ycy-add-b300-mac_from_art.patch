Index: linux/arch/mips/ath79/mach-ab-b300.c
===================================================================
--- linux.orig/arch/mips/ath79/mach-ab-b300.c	2017-04-05 13:25:55.239022999 +0800
+++ linux/arch/mips/ath79/mach-ab-b300.c	2017-09-07 10:32:27.212016015 +0800
@@ -35,7 +35,7 @@
 #define AB_B300_KEYS_DEBOUNCE_INTERVAL (3 * AB_B300_KEYS_POLL_INTERVAL)
 
 static const char *ab_b300_part_probes[] = {
-	"airbat",
+	"tp-link",
 	NULL,
 };
 
@@ -78,7 +78,7 @@
 
 static void __init ab_b300_setup(void)
 {
-	u8 *mac = (u8 *) KSEG1ADDR(0x1f01fc00);
+	//u8 *mac = (u8 *) KSEG1ADDR(0x1f01fc00);
 	u8 *ee = (u8 *) KSEG1ADDR(0x1fff1000);
 	u8 tmpmac[ETH_ALEN];
 
@@ -92,7 +92,8 @@
 	ath79_eth1_data.phy_if_mode = PHY_INTERFACE_MODE_GMII;
 	ath79_eth1_data.duplex = DUPLEX_FULL;
 	ath79_switch_data.phy_poll_mask |= BIT(4);
-	ath79_init_mac(ath79_eth1_data.mac_addr, mac, 0);
+	//ath79_init_mac(ath79_eth1_data.mac_addr, mac, 0);
+ath79_init_mac(ath79_eth1_data.mac_addr, ee+2, 0);
 	ath79_register_eth(1);
 
 	/* WAN */
@@ -101,10 +102,10 @@
 	ath79_eth0_data.duplex = DUPLEX_FULL;
 	ath79_eth0_data.speed = SPEED_100;
 	ath79_eth0_data.phy_mask = BIT(4);
-	ath79_init_mac(ath79_eth0_data.mac_addr, mac, 1);
+	ath79_init_mac(ath79_eth0_data.mac_addr, ee+2, 1);
 	ath79_register_eth(0);
 
-	ath79_init_mac(tmpmac, mac, 0);
+	ath79_init_mac(tmpmac, ee+2, -1);
 	ath79_register_wmac(ee, tmpmac);
 
 
